#!/usr/bin/env python3
"""
Safe Calculator Application
This is a legitimate application that should be detected as SAFE
"""

import os
import sys
import math

class SafeCalculator:
    def __init__(self):
        self.history = []
    
    def add(self, a, b):
        result = a + b
        self.history.append(f"{a} + {b} = {result}")
        return result
    
    def subtract(self, a, b):
        result = a - b
        self.history.append(f"{a} - {b} = {result}")
        return result
    
    def multiply(self, a, b):
        result = a * b
        self.history.append(f"{a} * {b} = {result}")
        return result
    
    def divide(self, a, b):
        if b == 0:
            raise ValueError("Cannot divide by zero")
        result = a / b
        self.history.append(f"{a} / {b} = {result}")
        return result
    
    def power(self, base, exponent):
        result = math.pow(base, exponent)
        self.history.append(f"{base} ^ {exponent} = {result}")
        return result
    
    def square_root(self, number):
        if number < 0:
            raise ValueError("Cannot take square root of negative number")
        result = math.sqrt(number)
        self.history.append(f"âˆš{number} = {result}")
        return result
    
    def show_history(self):
        print("\n=== Calculation History ===")
        for calculation in self.history:
            print(calculation)
        print("=" * 30)
    
    def clear_history(self):
        self.history.clear()
        print("History cleared.")
    
    def run(self):
        print("=== Safe Calculator v1.0 ===")
        print("A legitimate calculator application")
        
        while True:
            print("\nOptions:")
            print("1. Addition")
            print("2. Subtraction")
            print("3. Multiplication")
            print("4. Division")
            print("5. Power")
            print("6. Square Root")
            print("7. Show History")
            print("8. Clear History")
            print("9. Exit")
            
            try:
                choice = input("\nEnter your choice (1-9): ")
                
                if choice == '9':
                    print("Thank you for using Safe Calculator!")
                    break
                elif choice == '7':
                    self.show_history()
                elif choice == '8':
                    self.clear_history()
                elif choice in ['1', '2', '3', '4', '5']:
                    num1 = float(input("Enter first number: "))
                    num2 = float(input("Enter second number: "))
                    
                    if choice == '1':
                        result = self.add(num1, num2)
                    elif choice == '2':
                        result = self.subtract(num1, num2)
                    elif choice == '3':
                        result = self.multiply(num1, num2)
                    elif choice == '4':
                        result = self.divide(num1, num2)
                    elif choice == '5':
                        result = self.power(num1, num2)
                    
                    print(f"Result: {result}")
                    
                elif choice == '6':
                    num = float(input("Enter number: "))
                    result = self.square_root(num)
                    print(f"Result: {result}")
                else:
                    print("Invalid choice! Please try again.")
                    
            except ValueError as e:
                print(f"Error: {e}")
            except Exception as e:
                print(f"An error occurred: {e}")

if __name__ == "__main__":
    calculator = SafeCalculator()
    calculator.run()
